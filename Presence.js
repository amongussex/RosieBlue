function N(t){window.enmity.plugins.registerPlugin(t)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const _=window.enmity.modules.common.Linking;window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;var k="Presence",R="1.1.1",V="A custom rich presence",D=[{name:"atyanex",id:"1009909324010749954"}],U={plugin:"https://github.com/FierysDiscordAddons/Presence/releases/latest/download/Presence.js",manifest:"https://github.com/FierysDiscordAddons/Presence/releases/latest/download/manifest.json",changelog:"Fix presence not being set when timestamps are not set",source:"https://github.com/FierysDiscordAddons/Presence"},M="#f69220",a={name:k,version:R,description:V,authors:D,updater:U,color:M};const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground;const j=e.KeyboardAvoidingView;e.Modal,e.Pressable,e.RefreshControl;const z=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const y=e.Text;e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const P=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon;const g=e.FormInput;e.FormLabel,e.FormRadio,e.FormRow;const v=e.FormSection;e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;function m(t,s,c){return window.enmity.settings.get(t,s,c)}function S(){var t,s,c,u,p,o,l,d,r,T,F,C;let i={name:(t=m(a.name,"name",void 0))==null?void 0:t.toString(),type:3,details:(s=m(a.name,"details",void 0))==null?void 0:s.toString(),state:(c=m(a.name,"state",void 0))==null?void 0:c.toString(),application_id:(u=m(a.name,"applicationId",void 0))==null?void 0:u.toString(),assets:{},buttons:[],timestamps:{start:Number(m(a.name,"startTimestamp",void 0)),end:Number(m(a.name,"endTimestamp",void 0))}};if(!i.name)return;console.log("Got past activity.name check");const A=(p=m(a.name,"largeImage",void 0))==null?void 0:p.toString(),B=(o=m(a.name,"largeImageText",void 0))==null?void 0:o.toString();A&&i.assets&&(console.log("Adding large image"),i.assets.large_image=A,i.assets.large_text=B);const L=(l=m(a.name,"smallImage",void 0))==null?void 0:l.toString(),$=(d=m(a.name,"smallImageText",void 0))==null?void 0:d.toString();L&&i.assets&&(console.log("Adding small image"),i.assets.small_image=L,i.assets.small_text=$),i.assets&&!i.assets.large_image&&!i.assets.small_image&&(console.log("No assets"),i.assets=void 0);const I=(r=m(a.name,"button1Label",void 0))==null?void 0:r.toString(),f=(T=m(a.name,"button1Url",void 0))==null?void 0:T.toString();if(I&&f&&i.buttons){console.log("Adding button 1");const h={label:I,url:f};i.buttons.push(h)}const E=(F=m(a.name,"button2Label",void 0))==null?void 0:F.toString(),x=(C=m(a.name,"button2Url",void 0))==null?void 0:C.toString();if(E&&x&&i.buttons){console.log("Adding button 2");const h={label:E,url:x};i.buttons.push(h)}return i.buttons&&i.buttons.length===0&&(console.log("No buttons"),i.buttons=void 0),!i.timestamps.start&&!i.timestamps.end&&(console.log("No timestamps"),i.timestamps=void 0),console.log(i),i}function b(){return m(a.name,"applicationId",!1)&&m(a.name,"name",!1)}function G(t,s){return window.enmity.modules.getModule(t,s)}function W(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;const{SET_ACTIVITY:H}=G(t=>typeof t.SET_ACTIVITY=="object");function w(t){return H.handler({isSocketConnected:()=>!0,socket:{id:100,application:{id:m(a.name,"applicationId"),name:t?t.name:"Presence"},transport:"ipc"},args:{pid:10,activity:t}})}var K=({settings:t})=>{const s=[{item:"Name",placeholder:"Apeture Science"},{item:"Details",placeholder:"Cooperative Testing Initiative"},{item:"State",placeholder:"Testing\xB2"}],c=["Start","End"],u=[{image:"Large",placeholder_url:"teambuilding_testchamber01",placeholder:"Team Building Test Chamber 01"},{image:"Small",placeholder_url:"apeture_science",placeholder:"Apeture Science"}],p=[{button:1,placeholder_url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",placeholder:"Watch"},{button:2,placeholder_url:"https://store.steampowered.com/app/620/Portal_2/",placeholder:"Buy Portal 2"}];return n.useEffect(()=>()=>{b()?(console.log("Setting activity on settings close"),w(S())):w(void 0)},[]),n.createElement(j,{behavior:"padding",style:{flex:1}},n.createElement(z,null,n.createElement(v,{title:"Basic"},n.createElement(g,{value:t.get("applicationId"),onChange:o=>t.set("applicationId",o||void 0),title:"Application ID",placeholder:"12345678910"}),s.map(({item:o,placeholder:l})=>n.createElement(g,{value:t.get(o.toLowerCase()),onChange:d=>t.set(o.toLowerCase(),d||void 0),title:o,placeholder:l}))),n.createElement(v,{title:"Timestamps"},c.map(o=>n.createElement(g,{value:t.get(`${o.toLowerCase()}Timestamp`),onChange:l=>t.set(`${o.toLowerCase()}Timestamp`,l||void 0),title:`${o} timestamp`,placeholder:"12345678910 (in ms)"}))),n.createElement(v,{title:"Images"},u.map(({image:o,placeholder:l,placeholder_url:d})=>n.createElement(n.Fragment,null,n.createElement(g,{value:t.get(`${o.toLowerCase()}Image`),onChange:r=>t.set(`${o.toLowerCase()}Image`,r||void 0),title:`${o} image asset or URL`,placeholder:d}),n.createElement(g,{value:t.get(`${o.toLowerCase()}ImageText`),onChange:r=>t.set(`${o.toLowerCase()}ImageText`,r||void 0),title:`${o} image text`,placeholder:l})))),n.createElement(v,{title:"Buttons"},p.map(({button:o,placeholder:l,placeholder_url:d})=>n.createElement(n.Fragment,null,n.createElement(g,{value:t.get(`button${o}Label`),onChange:r=>t.set(`button${o}Label`,r||void 0),title:`Button ${o} label`,placeholder:l}),n.createElement(g,{value:t.get(`button${o}Url`),onChange:r=>t.set(`button${o}Url`,r||void 0),title:`Button ${o} URL`,placeholder:d})))),n.createElement(P,{style:{marginBottom:50}}),n.createElement(y,{style:{textAlign:"center",color:"#fff",fontSize:12}},"Developers: ",n.createElement(y,{style:{color:"#7289da"},onPress:()=>_.openURL("https://fiery.gay/")},"Fiery")," and ",n.createElement(y,{style:{color:"#7289da"},onPress:()=>_.openURL("https://connor.is-a.dev")},"Connor")),n.createElement(P,{style:{marginBottom:50}})))};const Q=W("AppState"),Y={...a,onStart(){let t=0;const s=3,c=()=>{var u;try{t++,b()&&(console.log("Setting activity in delayed start"),w(S()));const{remove:p}=(u=Q.AppState)==null?void 0:u.addEventListener("change",o=>{o==="active"&&b()&&(console.log("Setting activity on app focus"),w(S()))});this.removeAppStateLister=p}catch{t<s?setTimeout(c,t*1e4):console.error(`${a.name} failed to start. Giving up.`)}};setTimeout(()=>{c()},300)},onStop(){w(void 0),this.removeAppStateLister&&this.removeAppStateLister()},getSettingsPanel({settings:t}){return n.createElement(K,{settings:t})}};N(Y);
